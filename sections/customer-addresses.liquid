{{ "section-customer-account.css" | asset_url | stylesheet_tag }}
{{ "section-customer-addresses.css" | asset_url | stylesheet_tag }}
{{ "section-customer-addresses-form.css" | asset_url | stylesheet_tag }}
{{ "component-customer-addresses-card.css" | asset_url | stylesheet_tag }}

<script src="{{ 'customer.js' | asset_url }}" defer></script>

<div class="customer" data-customer-addresses>
  <div class="customer-wrapper page-width">
    <header class="member-header">
      <div class="member-title">
        <h1 class="member-title_address headline-1">{{ "customer.account.menu.address" | t }}</h1>
      </div>
      <div class="member-nav">
        <a role="option" target="_self" tabindex="-1" class="member-nav_link m-profile" href="{{ routes.account_url }}">{{ "customer.account.menu.profile" | t }}</a>
        <a role="option" target="_self" tabindex="-1" class="member-nav_link m-order" href="{{ routes.account_url }}/#orders">{{ "customer.account.menu.order" | t }}</a>
        <a role="option" target="_self" tabindex="-1" class="member-nav_link m-favorite" href="{{ routes.root_url }}pages/favorites">{{ "customer.account.menu.favorite" | t }}</a>
        <a role="option" target="_self" tabindex="-1" class="member-nav_link m-address active" href="{{ routes.account_addresses_url }}">{{ "customer.account.menu.address" | t }}</a>
      </div>
      <div class="member-end">&nbsp;</div>
    </header>

    <div class="add-address" id="modalAddress" aria-modal-expanded="false">
      <section class="address-modal">
        {%- form 'customer_address', customer.new_address -%}
        <div class="address-modal_scroll">
          <div class="address-modal_body" data-scroll>
            <button class="address-modal_body--close" data-id="modalAddress" data-close>
              {%- render 'icon-close' -%}<span class="visually-hidden">{{ "customer.addresses.close" | t }}</span>
            </button>
            <header class="address-modal_body--header">
              <h2 class="headline-2">{{ "customer.addresses.add_new" | t }}</h2>
            </header>
            <div class="field">
              <input type="text" id="AddressFirstName{{ form.id }}" name="address[first_name]" value="{{ form.first_name }}" autocomplete="given-name" placeholder="{{ 'customer.addresses.first_name' | t }}" />
              <label for="AddressFirstName{{ form.id }}">{{ "customer.addresses.first_name" | t }}</label>
            </div>
            <div class="field">
              <input type="text" id="AddressLastName{{ form.id }}" name="address[last_name]" value="{{ form.last_name }}" autocomplete="family-name" placeholder="{{ 'customer.addresses.last_name' | t }}" />
              <label for="AddressLastName{{ form.id }}">{{ "customer.addresses.last_name" | t }}</label>
            </div>
            <div class="field">
              <input type="text" id="AddressCompany{{ form.id }}" name="address[company]" value="{{ form.company }}" autocomplete="organization" placeholder="{{ 'customer.addresses.company' | t }}" />
              <label for="AddressCompany{{ form.id }}">{{ "customer.addresses.company" | t }}</label>
            </div>
            <div class="field">
              <input type="text" id="AddressAddress1{{ form.id }}" name="address[address1]" value="{{ form.address1 }}" autocomplete="address-line1" placeholder="{{ 'customer.addresses.address1' | t }}" />
              <label for="AddressAddress1{{ form.id }}">{{ "customer.addresses.address1" | t }}</label>
            </div>
            <div class="field">
              <input type="text" id="AddressAddress2{{ form.id }}" name="address[address2]" value="{{ form.address2 }}" autocomplete="address-line2" placeholder="{{ 'customer.addresses.address2' | t }}" />
              <label for="AddressAddress2{{ form.id }}">{{ "customer.addresses.address2" | t }}</label>
            </div>
            <div class="field">
              <input type="text" id="AddressCity{{ form.id }}" name="address[city]" value="{{ form.city }}" autocomplete="address-level2" placeholder="{{ 'customer.addresses.city' | t }}" />
              <label for="AddressCity{{ form.id }}">{{ "customer.addresses.city" | t }}</label>
            </div>
            <div class="field">
              <select id="AddressCountry{{ form.id }}" class="field-select" name="address[country]" value="{{ form.country }}" data-id="{{ form.id }}" data-country-selector autocomplete="country">
                {{
                  all_country_option_tags
                }}
              </select>
              <span class="select-arrow">{%- render "icon-select" -%}</span>
              <label for="AddressCountry{{ form.id }}">{{ "customer.addresses.country" | t }}</label>
            </div>
            <div id="AddressProvinceContainer{{ form.id }}" class="field" style="display: none">
              <select id="AddressProvince{{ form.id }}" class="field-select" name="address[province]" value="{{ form.province }}" autocomplete="address-level1"></select>
              <span class="select-arrow">{%- render "icon-select" -%}</span>
              <label for="AddressProvince{{ form.id }}">{{ "customer.addresses.province" | t }}</label>
            </div>
            <div class="field">
              <input type="text" id="AddressZip{{ form.id }}" name="address[zip]" value="{{ form.zip }}" autocapitalize="characters" autocomplete="postal-code" placeholder="{{ 'customer.addresses.zip' | t }}" />
              <label for="AddressZip{{ form.id }}">{{ "customer.addresses.zip" | t }}</label>
            </div>
            <div class="field">
              <input type="tel" id="AddressPhone{{ form.id }}" name="address[phone]" value="{{ form.phone }}" autocomplete="tel" placeholder="{{ 'customer.addresses.phone' | t }}" />
              <label for="AddressPhone{{ form.id }}">{{ "customer.addresses.phone" | t }}</label>
            </div>
            <div class="field-checkbox">
              {{ form.set_as_default_checkbox }}
              <span aria-hidden="true" class="checkbox-box circle"></span>
              <span aria-hidden="true" class="checkbox-box"></span>
              <span aria-hidden="true" class="checkbox-box-icon-container">
                <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24" role="img" width="24px" height="24px">
                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g transform="translate(2.000000, 2.000000)">
                      <rect x="0" y="0" width="20" height="20" rx="10"></rect>
                      <rect class="checkicon-fill" x="0" y="0" width="20" height="20" rx="5"></rect>
                      <path class="checkicon-check" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M6.00134645 9.81868355 9.12119517 13.003429 14.9964286 7"></path>
                    </g>
                  </g>
                </svg>
              </span>
              <label for="address_default_address_new">{{ "customer.addresses.set_default" | t }}</label>
            </div>
          </div>
        </div>
        <div class="address-modal_bottom">
          <button type="submit" class="button mobile-btn">{{ "customer.addresses.save" | t }}</button>
        </div>
        {%- endform -%}
      </section>
    </div>

    <section class="customer-addresses">
      {% assign address_count = customer.addresses | size %}
      <h2 class="headline-2">{{ "customer.addresses.title" | t }}</h2>
      <div class="customer-addresses_items{% if address_count > 0 %} pb-30{% endif %}">
        {%- if address_count > 0 -%} {%- for addresses in customer.addresses -%} {% render 'customer-addresses-card', address: addresses %} {%- endfor -%} {%- else -%}
        <div class="customer-addresses_empty">
          <p>{{ "customer.addresses.empty" | t }}</p>
        </div>
        {%- endif -%}
      </div>
      <button type="button" class="button mobile-btn" data-add>
        {{ "customer.addresses.add" | t }}
      </button>
    </section>
  </div>
</div>

<script>
  window.onload = () => {
    typeof CustomerAddresses !== "undefined" && new CustomerAddresses()
  }
</script>
